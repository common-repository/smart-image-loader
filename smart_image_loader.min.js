function rf_poly(){for(var lastTime=0,vendors=["webkit","moz"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}!function($){"use strict";var $wrapping_image,$wrapped_images,$loading_images,$html_body,$noscripts,host,window_width,window_height,doc_height,scroll_top,scroll_left,all_loaded,initialized,scroll_event,scroll_event_last,resize_event,resize_event_last,sil_options=window.sil_options||{selector:"img",cleanup:!0,meat:100,refresh_resize:!0,refresh_scroll:!1,lazy_load_at:1024,fade:!1,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",force_visible:!0},d=document,w=window,$document=$(d),lazyload=!(!w.matchMedia||!w.matchMedia("(max-device-width: "+sil_options.lazy_load_at+"px)").matches),viewport=function(){var e=w,a="inner";return"innerWidth"in w||(a="client",e=d.documentElement||d.body),{width:e[a+"Width"],height:e[a+"Height"]}},getStyle=function(el,property){return window.getComputedStyle?document.defaultView.getComputedStyle(el,null)[property]:el.currentStyle?el.currentStyle[property]:void 0},scrolled=function(){return scroll_event_last!==scroll_event},resized=function(){return resize_event_last!==resize_event},is_visible_in_viewport=function(v){var element,$element,data,element_visibile,is_not_above_screen,is_not_below_screen,is_not_right_of_screen,is_not_left_of_screen,options;return v.nodeType&&1==v.nodeType?element=v:this.nodeType&&1==this.nodeType&&(element=this),$element=$(element),data=$element.data(),options=sil_options,element_visibile=data.visibility,is_not_above_screen=data.offsetTop+data.height>scroll_top-options.meat,is_not_left_of_screen=data.offsetLeft+data.width>scroll_left-options.meat,is_not_below_screen=data.offsetTop<scroll_top+window_height+options.meat,is_not_right_of_screen=data.offsetLeft<scroll_left+window_width+options.meat,is_not_above_screen&&is_not_left_of_screen&&is_not_below_screen&&is_not_right_of_screen&&element_visibile},is_visible=function(v){var element;return v.nodeType&&1==v.nodeType?element=v:this.nodeType&&1==this.nodeType&&(element=this),$(element).data("visibility")},no_filter=function(){return!0},has_absolute_size=function(img){return"string"==typeof img.width&&img.width.match(/^\d+$/)&&"string"==typeof img.height&&img.height.match(/^\d+$/)},refresh_data=function($elements){($elements=$elements||$wrapped_images||$("body").find("noscript").prev(sil_options.selector)).each(function(){var $this=$(this);$this.data({offsetTop:$this.offset().top,offsetLeft:$this.offset().left,width:$this.width(),height:$this.height(),visibility:"none"!=getStyle(this,"display")&&"hidden"!=getStyle(this,"visibility")&&"0"!=getStyle(this,"opacity")&&$this.is(":visible")})}),doc_height=$(d).height()},load_image=function(wrapping_image,on_load_callback,override_fading){var sizes,srcSet,classId=($wrapping_image=$(wrapping_image)).attr("data-sil"),$noscript=$noscripts.filter('[data-sil="'+classId+'"]');"function"==typeof on_load_callback&&$wrapping_image.on("load",on_load_callback),sil_options.fade&&!override_fading&&($wrapping_image.data({opacity:$wrapping_image.css("opacity")}).css({opacity:"0"}),$wrapping_image.on("load",function(){$(this).fadeTo(500,$(this).data("opacity"))})),sizes="(max-width: "+window_width+"px) "+parseInt($wrapping_image.data("width")/window_width*100)+"vw",$wrapping_image.attr("sizes")&&(sizes+=", "+$wrapping_image.attr("sizes")),$wrapping_image.attr("sizes",sizes),(srcSet=$noscript.attr("data-srcset"))&&$wrapping_image.attr("srcset",srcSet),$noscript.attr("data-src")&&$wrapping_image.attr("src",$noscript.attr("data-src")),$loading_images=$loading_images.add($wrapping_image),requestAnimationFrame(function(){has_absolute_size(wrapping_image)||(refresh_data($wrapped_images),load_visible_images())}),sil_options.cleanup&&$noscript.parent("span").remove()},load_images=function(filter,override_fading){var $images_to_load=$wrapped_images.filter(filter||no_filter);$images_to_load.length>0&&$images_to_load.each(function(i,image){$wrapped_images=$wrapped_images.map(function(){if(this!==image)return this}),load_image(image,on_image_load,override_fading)})},load_visible_images=function(filter,override_fading){load_images(is_visible_in_viewport,override_fading)},load_all_images=function(){load_images(sil_options.force_visible?is_visible:no_filter)},on_image_load=function(e){var $images_to_load,$images_waiting;$document.trigger("sil_load",e.target),has_absolute_size(e.target)||(refresh_data($wrapped_images),load_visible_images()),e.target.removeAttribute("data-sil"),$images_to_load=$wrapped_images.filter(is_visible_in_viewport),$images_waiting=$wrapped_images.not($images_to_load),$loading_images=$loading_images.map(function(){if(this!==e.target)return this}),$images_to_load.length+$loading_images.length===0&&(0===$images_waiting.length?on_all_load():on_all_visible_load())},on_all_visible_load=function(){$document.trigger("sil_load_visible"),0===$wrapped_images.length?on_all_load():lazyload||load_all_images()},on_all_load=function(){$document.trigger("sil_load_all")},on_document_scroll=(window.sil_refresh=function(){!0===initialized&&(refresh_data($wrapped_images),load_visible_images())},function(e){scroll_event=e}),on_window_resize=function(e){resize_event=e},on_document_ready=function(){window.requestAnimationFrame(init)},on_window_load=function(){doc_height=$document.height()},unregister_events=function(){$(w).off("resize",on_window_resize),$document.off("scroll",on_document_scroll)},render=function(frame){scrolled()&&(scroll_top=$document.scrollTop(),scroll_left=$document.scrollLeft(),sil_options.refresh_scroll&&refresh_data($wrapped_images),load_visible_images(),scroll_event_last=scroll_event),resized()&&(window_width=viewport().width,window_height=viewport().height,refresh_data($wrapped_images),sil_options.refresh_resize&&refresh_data($wrapped_images),load_visible_images(),resize_event_last=resize_event),all_loaded?unregister_events():w.requestAnimationFrame(render)},init=function(){$html_body=$("html, body"),$noscripts=$("body").find("noscript[data-sil]"),$wrapped_images=$(sil_options.selector+"[data-sil]"),window_width=viewport().width,window_height=viewport().height,host=d.location.protocol+"//"+d.location.host+"/",scroll_top=$document.scrollTop(),scroll_left=$document.scrollLeft(),doc_height=$document.height(),$loading_images=$([]),all_loaded=!($wrapped_images.length>0),refresh_data($wrapped_images),load_visible_images(!0),render(),initialized=!0};rf_poly(),function(){$(w).on("resize",on_window_resize),$(w).on("load",on_window_load),$document.on("scroll",on_document_scroll),$document.ready(on_document_ready)}()}(jQuery);